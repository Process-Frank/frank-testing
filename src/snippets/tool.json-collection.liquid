{%- comment -%}
  JSON Collection Object
    Print the needed information for a collection in a nice JSON format.

  Parameters:
    collection - The collection that you're trying to dump the JSON for.

  Version:
    1.0.0 - 2018/08/29
{%- endcomment -%}

{% comment %} Is this a JSON Template? {% endcomment %}
{%- include 'tool.is-json-template' -%}
{%- unless isJSON -%}
  <script type="text/javascript">
    window.Collections = window.Collections || {};
    window.Collections[{{ collection.handle | json }}] =
{%- endunless -%}

{%- comment -%}/*
  Since collections/all is not a real collection, as well as the fact that
  {{ collection | json }} won't work for product data.. we need a more
  consistent print of collection data.
*/{%- endcomment -%}
{
  "id": {{- collection.id | json -}},
  "handle": {{- collection.handle | json -}},
  "all_tags": {{- collection.tags | json -}},
  "default_sort_by": {{- collection.default_sort_by | json -}},
  "description": {{- collection.description | json -}},
  "image": {%- include 'tool.json-image' with { image: collection.image } -%},
  "products": [
    {%- paginate collection.products by collection.all_products_count -%}
      {%- for product in collection.products -%}
        {{- product.handle | json -}}
        {%- unless forloop.last -%},{%- endunless -%}
      {%- endfor -%}
    {%- endpaginate -%}
  ],
  "template_suffix": {{- collection.template_suffix | json -}},
  "title": {{- collection.title | json -}},
  "url": {{- collection.url | json -}}
}

{%- unless isJSON -%}
; </script>
{%- endunless -%}
