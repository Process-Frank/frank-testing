{%- comment -%}
  JSON Block Settings
    For use in generating a block JSON Ready object. Works great when placed
    within a section object.

  Parameters:
    block - The block to generate
    section - The section that this block belongs to.
    settingTypes - CSV of Setting Types in the format of [setting:type]

  Version:
    1.0.0 - 2018/09/13
{%- endcomment -%}

{%- assign settingTypesArray = settingTypes | append:',' | append: commonTypes | split: ',' -%}

{%- if block -%}
  {
    "id": {{- block.id | json -}},
    "type": {{- block.type | json -}},
    "shopify_attributes": {{- block.shopify_attributes | json -}},
    "settings": [
      {%- include 'tool.json-settings-list' with {
        settingTypes: settingTypes,
        settings: block.settings
      } -%}
    ]
  }
{%- else -%}
  {{ nil | json }}
{%- endif -%}
