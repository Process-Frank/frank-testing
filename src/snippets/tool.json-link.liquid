{%- comment -%}
  JSON Link
    Printable JSON for link, can also be used to fetch nested menu.

  Parameters:
    link - Link to generate.

  Version:
    1.0.0 - 2018/08/06
{%- endcomment -%}
{%- if link != blank -%}
  {
    "handle": {{- link.handle | json -}},
    "title": {{- link.title | json -}},
    "type": {{- link.type | json -}},
    {%- if link.object != blank -%}
      "hasObject": true,
      "objectId": {{- link.object.id | json -}},
      "objectHandle": {{- link.object.handle | json -}},
    {%- else -%}
      "hasObject": false,
      "objectId": null,
      "objectHandle": null,
    {%- endif -%}
    "url": {{- link.url | json -}},
    "submenu":
      {%- assign submenu = linklists[link.handle] -%}
      {%- if submenu.handle == blank  -%}
        {%- capture altHandle -%}{{ link.handle }}{%- endcapture -%}
        {%- assign submenu = linklists[altHandle] -%}
      {%- endif -%}

      {%- if submenu.handle != blank -%}
        {%- include 'tool.json-linklist' with {
          list: submenu
        } -%}
      {%- else -%}
        null
      {%- endif -%}
  }
{%- else -%}
  null
{%- endif -%}
