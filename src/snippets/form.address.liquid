{%comment%}
  Address Form
    Reusable Address Edit/Insertion form

  Dependencies:
    templates/customer/addresses.liquid

  Settings:
    address (Optional) - Address to edit, if none is supplied this will be assumed to be a create address form.
    
  Version:
    1.0.0 - 2018/02/21
{%endcomment%}
{%-assign isEdit = false-%}
{%-if address-%}
  {%-assign isEdit = true-%}
{%-endif-%}




{% comment %} First Name {% endcomment %}
{%-assign field_name = 'first_name' -%}
<div class="o-form__group {%if form.errors contains field_name%}has_error{%endif%}">
  <label for="address[{{ field_name }}]" class="c-addresses__form__label">
    {{ 'customer.addresses.' | append: field_name | t }}
  </label>

  <input
    type="text"
    name="address[{{ field_name }}]"
    class="
      o-input
      o-form__input
      o-form__text
      {%if form.errors contains field_name%}has-error{%endif%}
    "
    required
    value="
      {%-if form[field_name]-%}
        {{ form[field_name] }}
      {%-elsif address[field_name]-%}
        {{ address[field_name] }}
      {%-endif-%}
    "
    autocapitalize="words"
    spellcheck="false"
    placeholder="{{ 'customer.addresses.' | append: field_name | t }}"
  />
</div>


{% comment %} Last Name {% endcomment %}
{%-assign field_name = 'last_name' -%}
<div class="o-form__group {%if form.errors contains field_name%}has_error{%endif%}">
  <label for="address[{{ field_name }}]" class="c-addresses__form__label">
    {{ 'customer.addresses.' | append: field_name | t }}
  </label>

  <input
    type="text"
    name="address[{{ field_name }}]"
    class="
      o-input
      o-form__input
      o-form__text
      {%if form.errors contains field_name%}has-error{%endif%}
    "
    required
    value="
      {%-if form[field_name]-%}
        {{ form[field_name] }}
      {%-elsif address[field_name]-%}
        {{address[field_name]}}
      {%-endif-%}
    "
    autocapitalize="words"
    spellcheck="false"
    placeholder="{{ 'customer.addresses.' | append: field_name | t }}"
  />
</div>


{% comment %} Company {% endcomment %}
{%-assign field_name = 'company' -%}
<div class="o-form__group {%if form.errors contains field_name%}has_error{%endif%}">
  <label for="address[{{ field_name }}]" class="c-addresses__form__label">
    {{ 'customer.addresses.' | append: field_name | t }}
  </label>

  <input
    type="text"
    name="address[{{ field_name }}]"
    class="
      o-input
      o-form__input
      o-form__text
      {%if form.errors contains field_name%}has-error{%endif%}
    "
    value="
      {%-if form[field_name]-%}
        {{ form[field_name] }}
      {%-elsif address[field_name]-%}
        {{address[field_name]}}
      {%-endif-%}
    "
    autocapitalize="words"
    spellcheck="false"
    placeholder="{{ 'customer.addresses.' | append: field_name | t }}"
  />
</div>


{% comment %} Address Line 1 * {% endcomment %}
{%-assign field_name = 'address1' -%}
<div class="o-form__group {%if form.errors contains field_name%}has_error{%endif%}">
  <label for="address[{{ field_name }}]" class="c-addresses__form__label">
    {{ 'customer.addresses.' | append: field_name | t }}
  </label>

  <input
    type="text"
    name="address[{{ field_name }}]"
    class="
      o-input
      o-form__input
      o-form__text
      {%if form.errors contains field_name%}has-error{%endif%}
    "
    required
    value="
      {%-if form[field_name]-%}
        {{ form[field_name] }}
      {%-elsif address[field_name]-%}
        {{address[field_name]}}
      {%-endif-%}
    "
    autocapitalize="words"
    spellcheck="false"
    placeholder="{{ 'customer.addresses.' | append: field_name | t }}"
  />
</div>

{% comment %} Address Line 2 {% endcomment %}
{%-assign field_name = 'address2' -%}
<div class="o-form__group {%if form.errors contains field_name%}has_error{%endif%}">
  <label for="address[{{ field_name }}]" class="c-addresses__form__label">
    {{ 'customer.addresses.' | append: field_name | t }}
  </label>

  <input
    type="text"
    name="address[{{ field_name }}]"
    class="
      o-input
      o-form__input
      o-form__text
      {%if form.errors contains field_name%}has-error{%endif%}
    "
    value="
      {%-if form[field_name]-%}
        {{ form[field_name] }}
      {%-elsif address[field_name]-%}
        {{address[field_name]}}
      {%-endif-%}
    "
    autocapitalize="words"
    spellcheck="false"
    placeholder="{{ 'customer.addresses.' | append: field_name | t }}"
  />
</div>

{% comment %} City {% endcomment %}
{%-assign field_name = 'city' -%}
<div class="o-form__group {%if form.errors contains field_name%}has_error{%endif%}">
  <label for="address[{{ field_name }}]" class="c-addresses__form__label">
    {{ 'customer.addresses.' | append: field_name | t }}
  </label>

  <input
    type="text"
    name="address[{{ field_name }}]"
    class="
      o-input
      o-form__input
      o-form__text
      {%if form.errors contains field_name%}has-error{%endif%}
    "
    required
    value="
      {%-if form[field_name]-%}
        {{ form[field_name] }}
      {%-elsif address[field_name]-%}
        {{address[field_name]}}
      {%-endif-%}
    "
    autocapitalize="words"
    spellcheck="false"
    placeholder="{{ 'customer.addresses.' | append: field_name | t }}"
  />
</div>


{% comment %} Country {% endcomment %}
{%-assign field_name = 'country' -%}
<div class="o-form__group {%if form.errors contains field_name%}has_error{%endif%}">

  <label for="address[{{ field_name }}]" class="c-addresses__form__label">
    {{ 'customer.addresses.' | append: field_name | t }}
  </label>

  <select
    id="address_country_new"
    name="address[{{ field_name }}]"
    class="
      o-input
      o-form__input
    "
    required
    value="
      {%-if form[field_name]-%}
        {{ form[field_name] }}
      {%-elsif address[field_name]-%}
        {{address[field_name]}}
      {%-endif-%}
    "
    data-form-id="{{ form.id }}"
    data-default="{{ form[field_name] }}"
    data-address-country
  >
    {{ country_option_tags }}
  </select>
</div>

{% comment %} Province / State {% endcomment %}
{%-assign field_name = 'province' -%}
<div
  class="
    o-form__group
    {%if form.errors contains field_name%}has_error{%endif%}
    c-addresses__input-province
  "
>
  <label for="address[{{ field_name }}]" class="c-addresses__form__label">
    {{ 'customer.addresses.' | append: field_name | t }}
  </label>

  <select
    name="address[{{ field_name }}]"
    class="
      o-input
      o-form__input
    "
    data-default="{{form.province}}"
    data-address-province
  >
  </select>
</div>


{% comment %} Zip {% endcomment %}
{%-assign field_name = 'zip' -%}
<div class="o-form__group {%if form.errors contains field_name%}has_error{%endif%}">
  <label for="address[{{ field_name }}]" class="c-addresses__form__label">
    {{ 'customer.addresses.' | append: field_name | t }}
  </label>

  <input
    type="text"
    name="address[{{ field_name }}]"
    class="
      o-input
      o-form__input
      o-form__text
      {%if form.errors contains field_name%}has-error{%endif%}
    "
    required
    value="
      {%-if form[field_name]-%}
        {{ form[field_name] }}
      {%-elsif address[field_name]-%}
        {{address[field_name]}}
      {%-endif-%}
    "
    spellcheck="false"
    placeholder="{{ 'customer.addresses.' | append: field_name | t }}"
  />
</div>

{% comment %} Phone {% endcomment %}
{%-assign field_name = 'phone' -%}
<div class="o-form__group {%if form.errors contains field_name%}has_error{%endif%}">
  <label for="address[{{ field_name }}]" class="c-addresses__form__label">
    {{ 'customer.addresses.' | append: field_name | t }}
  </label>

  <input
    type="text"
    name="address[{{ field_name }}]"
    class="
      o-input
      o-form__input
      o-form__text
      {%if form.errors contains field_name%}has-error{%endif%}
    "
    value="
      {%-if form[field_name]-%}
        {{ form[field_name] }}
      {%-elsif address[field_name]-%}
        {{address[field_name]}}
      {%-endif-%}
    "
    pattern="[0-9\s\-]*"
    placeholder="{{ 'customer.addresses.' | append: field_name | t }}"
  />
</div>


<div class="o-form__group">
  <div class="o-form__default-checkbox">
    {{ form.set_as_default_checkbox }}<p>{{ 'customer.addresses.set_default' | t }}</p>
    <label class="c-addresses__form__label" for="address_default_address_{{ form.id }}">
      {{ 'customer.addresses.set_default' | t }}
    </label>
  </div>
</div>

<button
  type="submit"
  class="o-btn"
>
  {%-if isEdit-%}
    {{ 'customer.addresses.update' | t }}
  {%-else-%}
    {{ 'customer.addresses.add' | t }}
  {%-endif-%}
</button>
 
<button type="button" class="o-btn " data-address-create-hide data-address-edit-hide>
  {{ 'customer.addresses.cancel' | t }}
</button>