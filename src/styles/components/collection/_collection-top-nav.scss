/*
 *  Collection Top Nav
 *    Contains the styles and layout for the collection template top navigation
 *
 *  Version:
 *    1.0.0 - 2019/01/18
 */
$c-collection-top-nav--spacing: 1em;

@mixin c-collection-top-nav--fade() {
  position: relative;

  &::after {
    width: $c-collection-top-nav--spacing * 2;
    height: 100%;
    top: 0;
    right: 0;
    content: "";
    position: absolute;
    background: linear-gradient(
      to right,
      rgba(255,255,255,0) 0%,
      rgba(255,255,255,1) 50%
    );
  }
}

.c-collection-top-nav {
  width: 100%;
  align-items: center;
  padding: $s-gutter--xsmall;

  //Pills styling
  &__pills {
    flex: 1;
    display: flex;
    overflow-x: auto;
    align-items: center;

    //Target tag pills
    &.is-tag {
      display: none;

      //Adjust active and filtered button state
      .o-btn.is-active {
        padding-right: 2.5em;
        position: relative;

        &::after {
          position: absolute;
          content: "";
          width: 1em;
          height: 100%;
          top: 0;
          right: 1em;
          background-image: url('./../assets/svgs/icon-close.svg');
          background-size: 0.5em;
          background-position: center 52.5%;
          background-repeat: no-repeat;
        }
      }

      //When filtering, change the color of buttons text
      &.is-filtering {
        .o-btn {
          color: $s-color--quaternary-muted;
          &.is-active { color: $s-color--quaternary-compliment; }
        }
      }
    }

    //Stop button wrapping
    .o-btn {
      white-space: nowrap;
      + .o-btn { margin-left: $c-collection-top-nav--spacing; }
    }
  }

  //Options Container and sort selector styles
  &__options {
    flex: 0;
    align-items: center;
    display: none;

    &-sort {
      margin-left: 1em;
    }
  }

  //More button and menu styles
  &__more {
    position: relative;
    overflow: visible;

    &-menu {
      width: auto;
      position: absolute;
      right: 0;
      z-index: $s-z--collection-top-bar-menu;
      background: $s-color--background;
      max-height: 0;
      min-width: 200px;
      overflow-y: auto;
      overflow-x: hidden;
      transition: all 0.2s $s-animation--ease-out;
      box-shadow: 0px 0.5em 1em 0px rgba(0,0,0,0.1);
      border-bottom-left-radius: 1em;
      border-top-left-radius: 1em;
    }

    &.is-visible {
      .c-collection-top-nav__more-menu {
        max-height: 400px;
      }
    }
  }

  //Check (Within menu) styles
  &__check {
    display: flex;
    align-items: center;
    padding: 1em;
    position: relative;

    &::after {
      content: "";
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      cursor: pointer;
    }

    &-box {
      display: inline-block;
      margin-right: 0.5em;
    }

    &-title {
      display: inline-block;
      white-space: nowrap;
      margin-right: 0.5em;
    }

    &:hover {
      background: $s-color--primary;
      color: $s-color--primary-compliment;
    }
  }


  &__filters {
    padding: $c-collection-top-nav--spacing 0;


    &-title {
      text-transform: uppercase;
      display: inline-block;
      padding-right: 1.5em;
      position: relative;
      cursor: pointer;
      color: $s-color--primary;

      &::after {
        position: absolute;
        width: 1em;
        height: 100%;
        top: 0;
        right: 0;
        content: "";
        display: block;

        background-image: url('./../assets/svgs/icon-hamburger.svg');
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
      }
    }

    &-wrapper {
      display: none;

      > select {
        padding-left: 0;
        padding-right: 0;
        width: 100%;
      }
    }

    &.is-expanded {
      .c-collection-top-nav__filters {
        &-title::after {
          background-size: 60%;
          background-image: url('./../assets/svgs/icon-close.svg');
        }

        &-wrapper {
          display: block;
        }
      }
    }
  }

  @include t-media-query($s-small-up) {
    display: flex;
    padding: $c-collection-top-nav--spacing;
    align-items: flex-start;

    //Hide mobile fade
    &::after { display: none; }

    &__pills {
      padding-right: $c-collection-top-nav--spacing;
      padding-bottom: 17px;/* fighting windows */
      margin-right: $c-collection-top-nav--spacing;
      overflow-x: auto;

      &.is-tag { display: flex; }
      &.is-type { display: none; }

      //White fade increase size and show
      &::after { width: $c-collection-top-nav--spacing*4; display: block; }
    }

    &__options {
      display: flex;
    }

    &__filters {
      display: none;
    }
  }
}
